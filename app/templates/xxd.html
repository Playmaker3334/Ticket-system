{% extends 'base.html' %}

{% block content %}
  <h1>Add New Ticket</h1>
  <form method="POST">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" required>
    <label for="description">Description:</label>
    <textarea id="description" name="description" required></textarea>
    <button type="submit">Add Ticket</button>
  </form>
{% endblock %}

<li>
  <a href="{{ url_for('ticket', ticket_id=ticket.id) }}">{{ ticket.title }}</a>
  <a href="{{ url_for('edit_ticket', ticket_id=ticket.id) }}">Edit</a>
  <a href="{{ url_for('delete_ticket', ticket_id=ticket.id) }}" onclick="return confirm('Are you sure you want to delete this ticket?');">Delete</a>
</li>

<h1>Edit Ticket</h1>
  <form method="POST">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" value="{{ ticket.title }}" required>
    <label for="description">Description:</label>
    <textarea id="description" name="description" required>{{ ticket.description }}</textarea>
    <button type="submit">Update Ticket</button>
  </form>


  <h1 style="color: white;">{{ ticket.title }}</h1>
  <p style="color: white;">{{ ticket.description }}</p>
  <p style="color: white;">Status: {{ ticket.status }}</p>
  <p style="color: white;">Created at: {{ ticket.created_at }}</p>


  <h1 style="color: white;">Tickets</h1>
    {% for ticket in tickets %}
      <li>
        <div class="btn-group mt-2 mb-2">
          <a href="{{ url_for('ticket', ticket_id=ticket.id) }}" class="btn btn-primary active" aria-current="page">{{ ticket.title }}</a>
          <a href="{{ url_for('edit_ticket', ticket_id=ticket.id) }}" class="btn btn-primary">Edit</a>
          <a href="{{ url_for('delete_ticket', ticket_id=ticket.id) }}" class="btn btn-primary" onclick="return confirm('Are you sure you want to delete this ticket?');">Delete</a>
        </div>
      </li>


      <div class="card" style="width: 18rem;">
        <div class="card-body">
          <h5 class="card-title">{{ ticket.title }}</h5>
          <h6 class="card-subtitle mb-2 text-body-secondary">Created at:{{ ticket.created_at }}</h6>
          <p class="card-text">{{ ticket.description }}</p>
          <a href="{{ url_for('edit_ticket', ticket_id=ticket.id) }}" class="card-link">Edit ticket</a>
          <a href="{{ url_for('delete_ticket', ticket_id=ticket.id) }}" class="card-link" onclick="return confirm('Are you sure you want to delete this ticket?');">Delete ticket</a>
        </div>
      </div>